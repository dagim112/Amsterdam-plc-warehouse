<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amsterdam PLC Warehouse</title>

<!-- JsBarcode for barcode generation -->
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<!-- QuaggaJS for scanning -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>

<style>
body {font-family: Arial; margin:0; background:#f2f4f7;}
.container{max-width:420px;margin:auto;padding:20px;}
.logo{text-align:center;font-size:26px;font-weight:bold;color:#ff7a00;}
.card{background:white;padding:20px;border-radius:10px;margin-top:20px;box-shadow:0 4px 10px rgba(0,0,0,0.1);}
h1{text-align:center;color:#1f3a5f;}
input, select{width:100%;padding:12px;margin-top:10px;font-size:16px;border-radius:6px;border:1px solid #ccc;}
button{width:100%;padding:14px;margin-top:12px;font-size:17px;border:none;border-radius:6px;background:#1f3a5f;color:white;}
.orange{background:#ff7a00;}
.hidden{display:none;}
.back{background:#999;}
.language-btn{margin:0 4px; padding:6px 12px; font-size:14px;}
#scanner-container{width:100%;height:200px; border:1px solid #ccc; margin-top:10px;}
table{width:100%; margin-top:10px; border-collapse:collapse;}
th, td{padding:6px; text-align:center; border:1px solid #ccc;}
</style>
</head>
<body>

<div class="container">

<!-- LOGIN -->
<div id="login" class="card">
  <div class="logo">Amsterdam PLC</div>
  <h1>Warehouse Login</h1>
  <input placeholder="Username" />
  <input type="password" placeholder="Password" />
  <button onclick="showDashboard()">LOGIN</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="card hidden">
  <h1>Dashboard</h1>
  <div style="text-align:center; margin:10px 0;">
    <button class="language-btn" onclick="setLang('en')">EN</button>
    <button class="language-btn" onclick="setLang('am')">·ä†·àõ</button>
    <button class="language-btn" onclick="setLang('or')">OR</button>
  </div>
  <button class="orange" id="btnStockIn" onclick="showStockIn()">üì¶ Stock In</button>
  <button class="orange" id="btnStockOut" onclick="showStockOut()">üöö Stock Out</button>
  <button class="orange" id="btnScan" onclick="showScan()">üîç Scan Barcode</button>
  <button class="orange" id="btnReports" onclick="showReports()">üìä Reports</button>
</div>

<!-- STOCK IN -->
<div id="stockin" class="card hidden">
  <h1>Stock In</h1>
  <input id="stockInBarcode" placeholder="Scan / Enter Barcode" />
  <input id="stockInPart" placeholder="Part Name" />
  <input type="number" id="stockInQty" placeholder="Quantity" />
  <input id="stockInSupplier" placeholder="Supplier" />
  <svg id="generatedBarcode"></svg>
  <button class="orange" onclick="generateBarcode()">Generate Barcode</button>
  <button class="orange" id="btnSaveIn">SAVE IN</button>
  <button class="back" onclick="showDashboard()">‚¨Ö Back</button>
</div>

<!-- STOCK OUT -->
<div id="stockout" class="card hidden">
  <h1>Stock Out</h1>
  <input id="stockOutBarcode" placeholder="Scan / Enter Barcode" />
  <input id="stockOutPart" placeholder="Part Name" />
  <input type="number" id="stockOutQty" placeholder="Quantity" />
  <input id="stockOutDest" placeholder="Destination / Customer" />
  <button class="orange" id="btnConfirmOut">CONFIRM OUT</button>
  <button class="back" onclick="showDashboard()">‚¨Ö Back</button>
</div>

<!-- SCAN BARCODE -->
<div id="scan" class="card hidden">
  <h1>Scan Barcode</h1>
  <input id="scanBarcode" placeholder="Scan or Enter Barcode" />
  <input id="scanPart" placeholder="Part Name (auto)" />
  <div id="scanner-container"></div>
  <button class="orange" onclick="startScanner()">Start Scanner</button>
  <button class="back" onclick="stopScanner()">Stop Scanner & Back</button>
  <button class="orange" id="btnSaveScan">SAVE</button>
</div>

<!-- REPORTS -->
<div id="reports" class="card hidden">
  <h1>Reports</h1>
  <table id="reportTable">
    <thead>
      <tr>
        <th>Type</th>
        <th>Barcode</th>
        <th>Part Name</th>
        <th>Qty</th>
        <th>Supplier/Destination</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <button class="orange" onclick="clearReports()">Clear Reports</button>
  <button class="back" onclick="showDashboard()">‚¨Ö Back</button>
</div>

</div>

<script>
// ===== HIDE / SHOW SCREENS =====
function hideAll(){
  ["login","dashboard","stockin","stockout","scan","reports"].forEach(id => 
    document.getElementById(id).classList.add("hidden")
  );
}
function showDashboard(){hideAll(); document.getElementById("dashboard").classList.remove("hidden");}
function showStockIn(){hideAll(); document.getElementById("stockin").classList.remove("hidden");}
function showStockOut(){hideAll(); document.getElementById("stockout").classList.remove("hidden");}
function showScan(){hideAll(); document.getElementById("scan").classList.remove("hidden");}
function showReports(){hideAll(); document.getElementById("reports").classList.remove("hidden"); updateReports();}

// ===== MULTILINGUAL SUPPORT =====
const labels = { /* same as before */ 
en: { login: "Warehouse Login", dashboard: "Dashboard", stockIn: "Stock In", stockOut: "Stock Out", scan: "Scan Barcode", saveIn: "SAVE IN", confirmOut: "CONFIRM OUT", save: "SAVE", back: "‚¨Ö Back", stockInBarcode: "Scan / Enter Barcode", stockInPart: "Part Name", stockInQty: "Quantity", stockInSupplier: "Supplier", stockOutBarcode: "Scan / Enter Barcode", stockOutPart: "Part Name", stockOutQty: "Quantity", stockOutDest: "Destination / Customer", scanBarcode: "Scan or Enter Barcode", scanPart: "Part Name (auto)" },
am: { login: "·ã®·ä•·âÉ ·àõ·ãï·ä®·àç ·åç·â£", dashboard: "·ã≥·àΩ·â¶·à≠·ãµ", stockIn: "·åç·â¢ ·ä•·âÉ", stockOut: "·ãç·å™ ·ä•·âÉ", scan: "·â£·à≠·äÆ·ãµ ·àµ·ä´·äï", saveIn: "·ä†·àµ·âÄ·àù·å•", confirmOut: "·ä†·à®·åã·åç·å•", save: "·ä†·àµ·âÄ·àù·å•", back: "‚¨Ö ·ãà·ã∞ ·äã·àã", stockInBarcode: "·â£·à≠·äÆ·ãµ ·ä†·àµ·åà·â£ / ·àµ·ä´·äï", stockInPart: "·ã®·ä•·âÉ ·àµ·àù", stockInQty: "·â•·ãõ·âµ", stockInSupplier: "·ä†·âÖ·à´·â¢", stockOutBarcode: "·â£·à≠·äÆ·ãµ ·ä†·àµ·åà·â£ / ·àµ·ä´·äï", stockOutPart: "·ã®·ä•·âÉ ·àµ·àù", stockOutQty: "·â•·ãõ·âµ", stockOutDest: "·àò·ãµ·à®·àª / ·ã∞·äï·â†·äõ", scanBarcode: "·â£·à≠·äÆ·ãµ ·àµ·ä´·äï ·ãà·ã≠·àù ·ä†·àµ·åà·â£", scanPart: "·ã®·ä•·âÉ ·àµ·àù (·à´·àµ·à∞·à≠)" },
or: { login: "Kuusaa Meeshaalee Seensa", dashboard: "Daashboordii", stockIn: "Seensa Meeshaa", stockOut: "Baasii Meeshaa", scan: "Baarkoodii Skaanii", saveIn: "Kuusaa", confirmOut: "Mirkaani", save: "Kuusaa", back: "‚¨Ö Gara Duraa", stockInBarcode: "Baarkoodii galchi / Skaanii", stockInPart: "Maqaa Meeshaa", stockInQty: "Baay'ina", stockInSupplier: "Kenniinsa", stockOutBarcode: "Baarkoodii galchi / Skaanii", stockOutPart: "Maqaa Meeshaa", stockOutQty: "Baay'ina", stockOutDest: "Iddoo / Kliyaanti", scanBarcode: "Baarkoodii Skaanii yookiin galchi", scanPart: "Maqaa Meeshaa (auto)" }
};

function setLang(lang){
  // simplified: update placeholders and button texts
  for (const id of ["login","dashboard","stockin","stockout","scan"]) {
    const container = document.getElementById(id);
    if(!container) continue;
    container.querySelectorAll("h1").forEach(el => {
      if(labels[lang][id] !== undefined) el.innerText = labels[lang][id];
    });
  }
}

// ===== Barcode Generation =====
function generateBarcode() {
  const barcodeValue = document.getElementById("stockInBarcode").value || "123456789";
  JsBarcode("#generatedBarcode", barcodeValue, { format: "CODE128", width:2, height:50 });
}

// ===== Barcode Scanner =====
let scannerRunning = false;
function startScanner() {
  if (scannerRunning) return;
  scannerRunning = true;
  Quagga.init({
    inputStream: { name:"Live", type:"LiveStream", target: document.querySelector('#scanner-container') },
    decoder: { readers:["code_128_reader"] }
  }, function(err){
    if(err){ console.log(err); scannerRunning=false; return; }
    Quagga.start();
  });
  Quagga.onDetected(onBarcodeDetected);
}
function onBarcodeDetected(result){
  const code = result.codeResult.code;
  document.getElementById("scanBarcode").value = code;
}
function stopScanner(){
  if(!scannerRunning) return;
  Quagga.stop();
  Quagga.offDetected(onBarcodeDetected);
  document.getElementById("scanner-container").innerHTML="";
  scannerRunning=false;
  showDashboard();
}

// ===== LocalStorage =====
const STOCK_IN_KEY="stockInItems", STOCK_OUT_KEY="stockOutItems";

document.getElementById("btnSaveIn").addEventListener("click", ()=>{
  const item={
    barcode:document.getElementById("stockInBarcode").value,
    part:document.getElementById("stockInPart").value,
    qty:document.getElementById("stockInQty").value,
    supplier:document.getElementById("stockInSupplier").value,
    type:"In"
  };
  const items=JSON.parse(localStorage.getItem(STOCK_IN_KEY))||[];
  items.push(item);
  localStorage.setItem(STOCK_IN_KEY,JSON.stringify(items));
  alert("Stock In saved!");
  ["stockInBarcode","stockInPart","stockInQty","stockInSupplier"].forEach(id=>document.getElementById(id).value="");
});

document.getElementById("btnConfirmOut").addEventListener("click", ()=>{
  const item={
    barcode:document.getElementById("stockOutBarcode").value,
    part:document.getElementById("stockOutPart").value,
    qty:document.getElementById("stockOutQty").value,
    supplier:document.getElementById("stockOutDest").value,
    type:"Out"
  };
  const items=JSON.parse(localStorage.getItem(STOCK_OUT_KEY))||[];
  items.push(item);
  localStorage.setItem(STOCK_OUT_KEY,JSON.stringify(items));
  alert("Stock Out saved!");
  ["stockOutBarcode","stockOutPart","stockOutQty","stockOutDest"].forEach(id=>document.getElementById(id).value="");
});

document.getElementById("btnSaveScan").addEventListener("click", ()=>{
  const item={
    barcode:document.getElementById("scanBarcode").value,
    part:document.getElementById("scanPart").value || "",
    type:"Scanned"
  };
  const items=JSON.parse(localStorage.getItem(STOCK_IN_KEY))||[];
  items.push(item);
  localStorage.setItem(STOCK_IN_KEY,JSON.stringify(items));
  alert("Scanned item saved!");
  document.getElementById("scanBarcode").value="";
  document.getElementById("scanPart").value="";
});

// ===== Reports =====
function updateReports(){
  const tableBody=document.querySelector("#reportTable tbody");
  tableBody.innerHTML="";
  const stockInItems=JSON.parse(localStorage.getItem(STOCK_IN_KEY))||[];
  const stockOutItems=JSON.parse(localStorage.getItem(STOCK_OUT_KEY))||[];
  [...stockInItems,...stockOutItems].forEach(item=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${item.type}</td><td>${item.barcode}</td><td>${item.part||""}</td><td>${item.qty||""}</td><td>${item.supplier||""}</td>`;
    tableBody.appendChild(tr);
  });
}

function clearReports(){
  if(confirm("Are you sure you want to clear all reports?")){
    localStorage.removeItem(STOCK_IN_KEY);
    localStorage.removeItem(STOCK_OUT_KEY);
    updateReports();
  }
}
</script>
</body>
</html>



